---
timestamp: 'Sun Oct 19 2025 00:01:39 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251019_000139.3ebd581b.md]]'
content_id: 40398c7afc3f1e054ee318249d8cba8701b96462bf22821aa242b5573df5e575
---

# Concept Design

> Design a set of concepts that will embody the functionality of your app and deliver its features. We expect you to have 3–5 concepts. Fewer than 3 concepts would probably mean limited functionality or a lack of separation of concerns; more than 5 likely suggests overambition or lack of focus.

### Concept Specifications

#### Users

```
concept Users
purpose represent authenticated users of the system
principle each user can add, track, and update deadlines

state

a set of Users with

a email String

a name String

actions

createUser (email, name: String): (user: User)

effect adds a new user with given info

```

***

#### Courses

```

concept Courses

purpose represent academic courses for organizing deadlines

principle each deadline belongs to exactly one course

state

a set of Courses with

a courseCode String

a title String

a optional canvasId String

actions

createCourse (courseCode, title: String): (course: Course)

effect creates a new course

```

***

#### Deadlines

```

concept Deadlines

purpose store and manage deadlines across courses

principle each deadline has a due date, title, and status

state

a set of Deadlines with

a Course

a title String

a due DateTime

a source of SYLLABUS or CANVAS or WEBSITE or MANUAL or IMAGE

a addedBy User

a optional status of NOT_STARTED or IN_PROGRESS or DONE

actions

create (course: Course, title: String, due: DateTime, source: SYLLABUS or CANVAS or WEBSITE or MANUAL or IMAGE, addedBy: User): (deadline: Deadline)

effect creates a new deadline

setStatus (deadline: Deadline, status: NOT_STARTED or IN_PROGRESS or DONE)

effect updates status of a deadline

```

***

#### UploadedDocuments

```

concept UploadedDocuments

purpose hold uploaded syllabi, screenshots, or external sources

principle each document is associated with a course

state

a set of UploadedDocuments with

a Course

a uploader User

a fileName String

a uploadTime DateTime

actions

upload (course: Course, file: String, uploader: User): (document: UploadedDocument)

effect uploads a file and returns the document object

```

***

#### ParsedDeadlineSuggestions

```

concept ParsedDeadlineSuggestions

purpose represent auto-parsed deadlines from uploaded materials or Canvas

principle each suggestion comes from a document or Canvas and can be confirmed into a real deadline

state

a set of ParsedDeadlineSuggestions with

an optional UploadedDocument

a optional canvasMetadata String

a title String

a due DateTime

a source of SYLLABUS or IMAGE or CANVAS

a optional confirmed Flag

actions

parseFromDocument (document: UploadedDocument)

effect parses the document and creates suggestions

parseFromCanvas (user: User)

effect parses fetched Canvas data and creates suggestions

confirm (suggestion: ParsedDeadlineSuggestion): (course: Course, title: String, due: DateTime, source: SYLLABUS or IMAGE or CANVAS, addedBy: User)

effect marks a suggestion as confirmed and extracts data for a real deadline

```

***

### Essential Synchronizations

```

sync parse_upload

when UploadedDocuments.upload (course, file, uploader)

where file is .pdf or image or structured text

then ParsedDeadlineSuggestions.parseFromDocument (document)

  

sync parse_canvas

when Users.connectCanvas (user)

where canvas OAuth is valid

then ParsedDeadlineSuggestions.parseFromCanvas (user)

  

sync confirm_suggestion

when ParsedDeadlineSuggestions.confirm (suggestion)

then Deadlines.create (course, title, due, source, addedBy)

  

sync status_update

when Request.setStatus (deadline, status)

then Deadlines.setStatus (deadline, status)

```

***

### A Brief Note

The five concepts work together to support DueStack’s core features while maintaining strong separation of concerns and modularity.

* **Users** represent authenticated individuals using the app. All actions (e.g., uploading documents, creating deadlines, updating status) are scoped by user identity.

* **Courses** serve as containers for organizing deadlines and documents. Each course is tied to specific content and metadata, and allows both imports and manual additions.

* **Deadlines** are the primary planning unit in the app. Deadlines can come from Canvas imports, manual inputs, or confirmed document/image parsing. Status values help students track progress.

* **UploadedDocuments** manage external syllabus files, GitHub tables, screenshots, and tie uploads to users and courses.

* **ParsedDeadlineSuggestions** serve as the result of OCR or parsing logic and must be confirmed by users before becoming official Deadlines. Canvas data also routes through this system to preserve the same confirmation pattern.

Generic parameters are resolved as:

* `User` always comes from the Users concept.

* `Course` in all references maps to Courses.

* `UploadedDocument` is an object from UploadedDocuments.

* `ParsedDeadlineSuggestions.confirm` emits data for `Deadlines.create` but doesn’t create the Deadline itself.

***

### Concept Specifications

#### 1) UserIdentity

```concept
concept UserIdentity
purpose manage the core, unique identity and basic profile information for individuals interacting with the system.
principle new user identities can be created, storing their unique email and display name.

state
a set of Users with // 'Users' here refers to the collection of User entities
  a email String
  a name String

actions
createUser (email: String, name: String): (user: User) or (error: String)
  requires email is unique
  effects a new User is created with the given email and name, and its opaque ID is returned.
```

***

#### 2) UserAuthentication

```concept
concept UserAuthentication [User]
purpose allow users to securely register, log in, and manage their credentials.
principle a user can register with a unique username and password, log in to establish a session, and log out to end it.

state
a set of AuthenticatedUsers with // 'AuthenticatedUsers' here refers to the collection of AuthenticatedUser entities
  a user User
  a username String
  a passwordHash String
  an optional sessionID String
  an optional canvasOAuthToken String // To store Canvas connection token

actions
register (user: User, username: String, password: String): Empty or (error: String)
  requires username is unique and password meets complexity requirements
  effects creates a new AuthenticatedUser, associating the provided User ID with a username and hashed password.

login (username: String, password: String): (sessionID: String, user: User) or (error: String)
  requires username and password match an existing AuthenticatedUser
  effects generates a new sessionID for the AuthenticatedUser.

logout (sessionID: String): Empty or (error: String)
  requires sessionID is valid
  effects clears the sessionID for the associated AuthenticatedUser.

changePassword (user: User, oldPassword: String, newPassword: String): Empty or (error: String)
  requires user exists, oldPassword matches, newPassword meets complexity requirements
  effects updates the passwordHash for the specified User.

connectCanvas (user: User, canvasOAuthToken: String): Empty or (error: String)
  requires user exists and canvasOAuthToken is valid
  effects stores the Canvas OAuth token for the user, enabling Canvas data fetching.
```

***

#### 3) CourseManagement

```concept
concept CourseManagement [User]
purpose organize and categorize academic deadlines by associating them with specific courses.
principle each user can define courses, assign unique identifiers, and manage course-specific details including an optional link to an external Canvas course.

state
a set of Courses with // 'Courses' here refers to the collection of Course entities
  a creator User
  a courseCode String
  a title String
  an optional canvasId String

actions
createCourse (creator: User, courseCode: String, title: String): (course: Course) or (error: String)
  requires courseCode is unique for the creator
  effects creates a new course with the given details, linked to the creator.

updateCourse (course: Course, newCourseCode: String, newTitle: String): Empty or (error: String)
  requires course exists and newCourseCode is unique for the creator (if changed)
  effects updates the courseCode and title of an existing course.

setCanvasId (course: Course, canvasId: String): Empty or (error: String)
  requires course exists and canvasId is unique across all courses
  effects sets or updates the external Canvas ID for the specified course.

deleteCourse (course: Course): Empty or (error: String)
  requires course exists and has no associated deadlines
  effects removes the specified course.
```

***

#### 4) DeadlineManagement

```concept
concept DeadlineManagement [User, Course]
purpose store and manage academic deadlines, tracking their status and association with courses.
principle each deadline has a due date, title, status, and is explicitly linked to a course and the user who added it.

state
a set of Deadlines with // 'Deadlines' here refers to the collection of Deadline entities
  a course Course
  a title String
  a due DateTime
  a source of SYLLABUS or CANVAS or WEBSITE or MANUAL or IMAGE or LLM_PARSED
  a addedBy User
  an optional status of NOT_STARTED or IN_PROGRESS or DONE

actions
createDeadline (course: Course, title: String, due: DateTime, source: SYLLABUS or CANVAS or WEBSITE or MANUAL or IMAGE or LLM_PARSED, addedBy: User): (deadline: Deadline) or (error: String)
  requires course exists
  effects creates a new deadline with the given details.

updateDeadline (deadline: Deadline, newTitle: String, newDue: DateTime, newSource: SYLLABUS or CANVAS or WEBSITE or MANUAL or IMAGE or LLM_PARSED): Empty or (error: String)
  requires deadline exists
  effects updates the title, due date, and source of an existing deadline.

setStatus (deadline: Deadline, status: NOT_STARTED or IN_PROGRESS or DONE): Empty or (error: String)
  requires deadline exists
  effects updates the completion status of a deadline.

deleteDeadline (deadline: Deadline): Empty or (error: String)
  requires deadline exists
  effects removes the specified deadline.
```

***

#### 5) DocumentManagement

```concept
concept DocumentManagement [User, Course]
purpose securely store and manage various uploaded materials (e.g., syllabi, screenshots) and associate them with specific courses and users.
principle each document is uniquely identified, linked to its uploading user and associated course, and its core metadata is maintained.

state
a set of UploadedDocuments with // 'UploadedDocuments' here refers to the collection of UploadedDocument entities
  a course Course
  a uploader User
  a fileName String
  a fileType String // e.g., "application/pdf", "image/png", "text/plain"
  a uploadTime DateTime
  a fileContent String // For storing content directly (e.g., base64 for images, raw text for PDFs)

actions
uploadDocument (course: Course, fileName: String, fileType: String, fileContent: String, uploader: User): (document: UploadedDocument, content: String) or (error: String)
  requires course exists
  effects stores the document content and metadata, associating it with the course and uploader. Returns document ID and content for further processing.

updateDocumentMetadata (document: UploadedDocument, newFileName: String, newFileType: String): Empty or (error: String)
  requires document exists
  effects updates the fileName and fileType of an existing document.

getDocumentContent (document: UploadedDocument): (content: String) or (error: String)
  requires document exists
  effects retrieves the content of the specified document.

deleteDocument (document: UploadedDocument): Empty or (error: String)
  requires document exists
  effects removes the specified document.
```

***

#### 6) SuggestionManagement

```concept
concept SuggestionManagement [User, Document, Course]
purpose represent extracted deadline candidates from documents, images, web pages, or Canvas; optionally AI-augmented.
principle suggestions are produced via an LLM from uploaded files, web pages, or Canvas data; users confirm suggestions before they become official deadlines.

state
a set of ParsedDeadlineSuggestions with // 'ParsedDeadlineSuggestions' here refers to the collection of ParsedDeadlineSuggestion entities
  a user User // The user who initiated the parsing
  an optional document Document // ID of the UploadedDocument if applicable
  an optional canvasMetadata String // Raw JSON data from Canvas
  an optional websiteUrl String
  a title String
  a due DateTime
  a source of SYLLABUS or IMAGE or WEBSITE or CANVAS
  an optional confirmed Boolean = false
  an optional confidence Number (0.0–1.0)
  an optional extractionMethod of CANVAS_JSON or LLM
  an optional provenance String // e.g., LLM model version, prompt used, file name
  an optional warnings set of String // e.g., "date ambiguous", "low confidence"

a set of ExtractionConfigs with // 'ExtractionConfigs' here refers to the collection of ExtractionConfig entities
  a name String
  a modelVersion String
  a basePromptTemplate String
  a maxTokens Number
  a temperature Number
  a timezone String
  an optional timeout Number

actions
createExtractionConfig (name: String, modelVersion: String, basePromptTemplate: String, maxTokens: Number, temperature: Number, timezone: String, optionalTimeout: Number): (config: ExtractionConfig) or (error: String)
  requires name is unique
  effects creates a new extraction configuration for LLM processing.

parseFromCanvas(user: User, canvasData: String, config: ExtractionConfig): (suggestions: List<ParsedDeadlineSuggestion>) or (error: String)
  requires config exists and canvasData is valid JSON
  effects parses assignment JSON data, creates suggestions linked to `user`.
           sets `extractionMethod = CANVAS_JSON`, `source = CANVAS`.

llmExtractFromDocument(user: User, documentId: Document, documentContent: String, config: ExtractionConfig): (suggestions: List<ParsedDeadlineSuggestion>) or (error: String)
  requires config exists, documentId exists, documentContent is text or image suitable for LLM
  effects uses LLM to extract structured suggestions from document content, creates suggestions linked to `user`.
           sets `extractionMethod = LLM`, `confidence`, `provenance` (linking to `documentId`).

llmExtractFromMultipleDocuments(user: User, documents: List<{documentId: Document, documentContent: String}>, config: ExtractionConfig): (suggestions: List<ParsedDeadlineSuggestion>) or (error: String)
  requires config exists, all documents contain extractable content
  effects sends ALL document contents to LLM in SINGLE request to enable cross-referencing, creates suggestions linked to `user`.
           sets `extractionMethod = LLM`, `confidence`, `provenance` with multi-source attribution.

llmExtractFromWebsite(user: User, url: String, websiteContent: String, config: ExtractionConfig): (suggestions: List<ParsedDeadlineSuggestion>) or (error: String)
  requires config exists, url is reachable, websiteContent is non-empty
  effects uses LLM to parse website content into deadline suggestions, creates suggestions linked to `user`.
           sets `extractionMethod = LLM`, `provenance`, `confidence`.

refineWithFeedback(suggestion: ParsedDeadlineSuggestion, feedback: String, config: ExtractionConfig): (suggestion: ParsedDeadlineSuggestion) or (error: String)
  requires suggestion exists, feedback is non-empty, config exists
  effects re-prompts LLM using user feedback to refine fields of the suggestion.
           updates title, due, warnings, or confidence.

editSuggestion(suggestion: ParsedDeadlineSuggestion, newTitle: String, newDue: DateTime): (suggestion: ParsedDeadlineSuggestion) or (error: String)
  requires suggestion exists, newTitle is non-empty, newDue is valid
  effects updates suggestion title and due date.
           sets `warnings` to indicate manual editing.

updateSuggestionTitle(suggestion: ParsedDeadlineSuggestion, newTitle: String): (suggestion: ParsedDeadlineSuggestion) or (error: String)
  requires suggestion exists and newTitle is non-empty
  effects updates suggestion title.
           sets `warnings` to indicate manual editing.

updateSuggestionDate(suggestion: ParsedDeadlineSuggestion, newDue: DateTime): (suggestion: ParsedDeadlineSuggestion, updatedDue: DateTime) or (error: String)
  requires suggestion exists and newDue is valid
  effects updates suggestion due date.
           sets `warnings` to indicate manual editing.

confirm (suggestion: ParsedDeadlineSuggestion, course: Course, addedBy: User): (course: Course, title: String, due: DateTime, source: SYLLABUS or IMAGE or WEBSITE or CANVAS or LLM_PARSED, addedBy: User) or (error: String)
  requires suggestion exists, is not already confirmed, has valid title and due date
  effects marks suggestion as confirmed, and returns the data for creating a new Deadline.
```

***

### Essential Synchronizations

```
sync parse_upload
when DocumentManagement.uploadDocument (document: d, content: c, course: crs, fileName: fn, fileType: ft, uploader: u)
where ft is "application/pdf" or "image/png" or "text/plain" // simplified check
then SuggestionManagement.llmExtractFromDocument (user: u, documentId: d, documentContent: c, config: default_llm_config) // Assuming 'default_llm_config' is an implicitly available config from ExtractionConfigs

sync parse_canvas
when UserAuthentication.connectCanvas (user: u, canvasOAuthToken: token) // This sync would need to trigger a periodic fetch or an explicit user action
then SuggestionManagement.parseFromCanvas (user: u, canvasData: (fetched data), config: default_canvas_config) // Assuming 'default_canvas_config' is an implicitly available config from ExtractionConfigs

sync confirm_suggestion
when SuggestionManagement.confirm (suggestion: s, course: c, addedBy: u) : (course: out_c, title: t, due: d, source: src, addedBy: out_u)
then DeadlineManagement.createDeadline (course: out_c, title: t, due: d, source: src, addedBy: out_u)

sync status_update
when Request.setStatus (deadline: dl, status: st) // Assuming 'Request' is a pseudo-concept for user requests
then DeadlineManagement.setStatus (deadline: dl, status: st)
```

***

### A Brief Note

The six concepts work together to support DueStack’s core features while maintaining strong separation of concerns and modularity.

* **UserIdentity** manages fundamental user identities (email, name) and is purely about identity management. All actions (e.g., uploading documents, creating deadlines, updating status) are scoped by a `User` ID which originates from this concept.
* **UserAuthentication** handles secure registration, login, and managing user credentials, including Canvas connection tokens, for existing `User` IDs from `UserIdentity`.
* **CourseManagement** serves as containers for organizing deadlines and documents. Each course is tied to specific content and metadata, and allows both imports and manual additions.
* **DeadlineManagement** is the primary planning unit in the app. Deadlines can come from Canvas imports, manual inputs, or confirmed document/image parsing. Status values help students track progress.
* **DocumentManagement** securely stores and manages external syllabus files, GitHub tables, screenshots, and ties uploads to users and courses.
* **SuggestionManagement** serves as the result of OCR or parsing logic and must be confirmed by users before becoming official Deadlines. Canvas data also routes through this system to preserve the same confirmation pattern.

Generic parameters are resolved as:

* `User` always comes from the `UserIdentity` concept.
* `Course` in all references maps to `CourseManagement`.
* `Document` is an object from `DocumentManagement`.
* `SuggestionManagement.confirm` emits data for `DeadlineManagement.createDeadline` but doesn’t create the Deadline itself.

Problem Statement: 16 (out of 16)\
Comment: Good work identifying an interesting problem that is relevant to you!\
Application Pitch: 14 (out of 14)\
Comment: Your features are well-explained and impactful--Good job!\
Concept Design: 26 (out of 39)\
Comment: -3: Your User concept is not really achieving its purpose of authenticating users--there is no password or authenticating action.\
-1: Your canvasId state in your Courses concept is inaccessible since it is not initialized during createCourse and there are no actions that allow for it to be initialized.\
-6: You are missing many essential actions in your concepts. Consider any updating or deletion actions that you might want to have. Also consider any further actions you might want to perform.\
-1: Remember to define any generic types you are using in the concept definition.\
-5: You break modularity in your ParsedDeadlineSuggestions concept. Remember that concepts cannot see the implementation or state of other concept, so the ParsedDeadlineSuggestions concept has no way of parsing from an UploadedDocument directly! This concept is also not associated with any User, which means that it will be nearly impossible to find an instance of this for a given user.\
UI Sketches: 6 (out of 6)\
Comment: Good job!\
User Journey: 9 (out of 9)\
Comment: Good job!\
Clarity and Organization: 4 (out of 5)\
Comment: -1: Make sure your links work!\
Critical Use of Tools: 5 (out of 5)\
Total points: 80\
Late days: 3\
Late days after slack/sick days: 0\
Final grade: 80

\<concept\_spec>
concept ParsedDeadlineSuggestions

purpose
represent extracted deadline candidates from documents, images, web pages, or Canvas; optionally AI-augmented

principle
suggestions are produced via an LLM from uploaded files, web pages, or Canvas data;
users confirm suggestions before they become official deadlines

state
a set of ParsedDeadlineSuggestion with
an optional UploadedDocument
an optional canvasMetadata String
an optional websiteUrl String
a title String
a due DateTime
a source of SYLLABUS or IMAGE or WEBSITE or CANVAS
an optional confirmed Boolean
an optional confidence Number (0.0–1.0)
an optional extractionMethod of CANVAS\_JSON or LLM
an optional provenance String
an optional warnings set of String

```
a set of ExtractionConfig with
    a modelVersion String
    a basePromptTemplate String
    a maxTokens Number
    a temperature Number
    a timezone String
    an optional timeout Number
```

actions

```
parseFromCanvas(user: User): List<ParsedDeadlineSuggestion>
    requires user has valid Canvas connection
    effect parses assignment JSON directly from Canvas API
           sets extractionMethod = CANVAS_JSON, source = CANVAS

llmExtractFromDocument(document: UploadedDocument, config: ExtractionConfig): List<ParsedDeadlineSuggestion>
    requires document contains extractable text or image content
    effect uses LLM to extract structured suggestions from document
           sets extractionMethod = LLM, confidence, provenance

llmExtractFromMultipleDocuments(documents: List<UploadedDocument>, config: ExtractionConfig): List<ParsedDeadlineSuggestion>
    requires all documents contain extractable content
    effect sends ALL documents to LLM in SINGLE request
           enables LLM to cross-reference information across documents
           (e.g., combine dates from PDF calendar with times from PNG syllabus)
           sets extractionMethod = LLM, confidence, provenance with multi-source attribution

llmExtractFromWebsite(url: String, config: ExtractionConfig): List<ParsedDeadlineSuggestion>
    requires url is reachable, non-empty, and starts with https://
    effect uses LLM to parse website content into deadline suggestions
           sets extractionMethod = LLM, provenance, confidence

refineWithFeedback(suggestion: ParsedDeadlineSuggestion, feedback: String, config: ExtractionConfig): ParsedDeadlineSuggestion
    requires suggestion exists and feedback is non-empty
    effect re-prompts LLM using user feedback to refine fields
           updates title, due, warnings, or confidence

validateSuggestions(source: UploadedDocument or String)
    requires source is non-null and has suggestions
    effect applies validation logic (e.g., duplicate detection, implausible dates, hallucination detection)
           adds warnings or raises error if issues are detected

editSuggestion(suggestion: ParsedDeadlineSuggestion, newTitle: String, newDue: DateTime): ParsedDeadlineSuggestion
    requires suggestion exists and newTitle is non-empty and newDue is valid
    effect updates suggestion title and due date without calling LLM
           sets warnings to indicate manual editing

updateSuggestionTitle(suggestion: ParsedDeadlineSuggestion, newTitle: String): ParsedDeadlineSuggestion
    requires suggestion exists and newTitle is non-empty
    effect updates suggestion title without calling LLM
           sets warnings to indicate manual editing

updateSuggestionDate(suggestion: ParsedDeadlineSuggestion, newDue: DateTime): ParsedDeadlineSuggestion
    requires suggestion exists and newDue is valid
    effect updates suggestion due date without calling LLM
           sets warnings to indicate manual editing

confirm(suggestion: ParsedDeadlineSuggestion): (course: Course, title: String, due: DateTime, source: SYLLABUS or IMAGE or WEBSITE or CANVAS, addedBy: User)
    requires suggestion is not already confirmed and has valid title and due
    effect marks suggestion as confirmed
           emits canonical data to Deadlines.create
```

notes
This concept integrates LLMs to enhance deadline extraction from diverse inputs (PDFs, screenshots, URLs).
Manual confirmation ensures control over noisy or ambiguous parsing.
Manual editing capabilities allow direct correction of LLM errors without re-invoking the LLM.
Suggestions remain independent of Deadlines until user approval.

\</concept\_spec>
